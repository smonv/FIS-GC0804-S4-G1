<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition template="/templates/admin/layout.xhtml">
        <f:metadata>
            <f:viewParam name="pid" value="#{adminEditImageProduct.pid}" />
            <f:viewAction action="#{adminEditImageProduct.init()}" />
        </f:metadata>
        <ui:define name="title">Product Images</ui:define>
        <ui:define name="content">
            <div class="container-fluid">
                <div class="row">
                    <h:messages style="list-style: none; padding: 0px; color: red"/>
                    <p>Preview</p>
                    <img id="uploadPreview" style="width: 400px; height: auto; max-height: 300px;border: solid 2px #cccccc; margin-bottom: 15px" />
                    <br/>
                    <h:form enctype="multipart/form-data">
                        <h:inputFile value="#{adminEditImageProduct.upload_img}" id="uploadImage" class="form-control"  onchange="PreviewImage();" style="width: 400px">
                            <f:validator validatorId="imageValidator" />
                        </h:inputFile>
                        <br/>
                        <h:commandButton value="Upload"  action="#{adminEditImageProduct.upload()}" class="btn btn-primary"/>
                        &nbsp;
                        <h:link value="Back" outcome="/admin/product/view.xhtml">
                            <f:param name="pid" value="#{adminEditImageProduct.pid}" />
                        </h:link>
                    </h:form>
                </div>
                <div class="row">

                </div>
            </div>                
            <script type="text/javascript">
                function PreviewImage() {
                    var oFReader = new FileReader();
                    oFReader.readAsDataURL(document.getElementById("j_idt80:uploadImage").files[0]);

                    oFReader.onload = function (oFREvent) {
                        document.getElementById("uploadPreview").src = oFREvent.target.result;
                    };
                }
            </script>
        </ui:define>
    </ui:composition>
</html>

