<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:composition template="/templates/client/layout.xhtml">
        <f:metadata>
            <f:viewParam name="mode" value="#{productBean.mode}" />
            <f:viewAction action="#{productBean.checkMode()}"/>
            <f:viewParam name="page" value="#{productBean.page}" />
            <f:viewParam name="cid" value="#{productBean.cid}" />
            <f:viewParam name="category" value="#{productBean.category}" />
            <f:event listener="#{productBean.loadProductList()}" type="preRenderView"/>
        </f:metadata>
        <ui:define name="title">List Products </ui:define>
        <ui:define name="content">
            <!-- Page title -->
            <div class="page-title">

                <c:if test="#{categoryBean.currentCategory== null}">
                    <h1>Products</h1>
                </c:if>
                <c:if test="#{categoryBean.currentCategory!= null}">
                    <h1>Products by #{categoryBean.currentCategory.name}</h1>
                </c:if>
                <!-- BREADCRUMBS -->
                <ul class="breadcrumb">
                    <li><h:link outcome="/index.xhtml">Home</h:link><span class="divider"></span></li>
                    <li class="active">Products</li>
                </ul>
            </div>
            <!-- //Page title -->							


            <!-- Project area -->
            <section class="project">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="box-wrapper">
                                <ul id="filter"> 
                                    <h:form>
                                        <li><h:commandLink value="All" immediate="true" action="#{productBean.clearParamAndRedirect()}" class="btn btn-primary"/></li>                     

                                        <ui:repeat var="category" value="#{categoryBean.allCategory}" varStatus="status">

                                            <li>
                                                <h:commandLink value="#{category.name}" 
                                                               class="btn btn-primary" 
                                                               action="#{productBean.clearPageAndRedirect()}">
                                                    <f:param name="cat_name" value="#{category.name}" />
                                                    <f:param name="scid" value="#{category.cid}" />
                                                </h:commandLink>
                                            </li>                           

                                        </ui:repeat>
                                    </h:form>
                                </ul>

                                <div id="grid">

                                    <br/>
                                    <ui:repeat var="product" value="#{productBean.products}" varStatus="status">

                                        <div class="item blue col-md-4 col-sm-6 col-xs-12 fix"  data-groups='["all", "numbers", "blue", "square"]'>
                                            <div class="project-item">

                                                <div class="post-thumbnail">
                                                    <h:graphicImage name="img/products/demo.jpg" library="client" alt="#{product.name}" />
                                                    <h:link class="element-link2" outcome="/product/show.xhtml?pid=#{product.pid}"></h:link>
                                                </div>

                                                <div class="project-details">
                                                    <h2><h:link value="#{product.name}" outcome="/product/show.xhtml">
                                                            <f:param name="pid" value="#{product.pid}" />
                                                            <c:if test="#{productBean.mode != null}">
                                                                <f:param name="mode" value="#{productBean.mode}" />
                                                            </c:if>
                                                        </h:link></h2>
                                                    <p>Price:&nbsp;<h:outputText value="$ #{product.price}" style="font-weight: 400;font-size: 16px; color: red" /></p>
                                                    <div class="readmore">
                                                        <h:link value="Details" outcome="/product/show.xhtml?pid=#{product.pid}">
                                                            <f:param name="pid" value="#{product.pid}" />
                                                            <c:if test="#{productBean.mode != null}">
                                                                <f:param name="mode" value="#{productBean.mode}" />
                                                            </c:if>
                                                        </h:link>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </ui:repeat>



                                </div> <!-- /grid -->	
                            </div> <!-- /box-wrapper -->

                        </div>
                        <div class="col-md-12">
                            <h:link outcome="index" value="Previous" class="btn btn-primary" 
                                    rendered="#{productBean.totalProducts > productBean.pageSize and productBean.page > 0}">
                                <f:param name="page" value="#{productBean.page - 1}"/>

                                <c:if test="#{productBean.cid gt 0}">
                                    <f:param name="cid" value="#{productBean.cid}" />
                                </c:if>
                            </h:link>


                            <h:link outcome="index" value="Next" class="btn btn-primary"
                                    rendered="#{productBean.totalProducts gt productBean.pageSize 
                                                and productBean.hasNextPage
                                                and productBean.pageSize * (productBean.page + 1) lt productBean.totalProducts 
                                                        }">
                                <f:param name="page" value="#{productBean.page + 1}"/>
                                <c:if test="#{productBean.cid gt 0}">
                                    <f:param name="cid" value="#{productBean.cid}"/>
                                </c:if>
                            </h:link> 
                        </div>
                    </div>
                </div>
                <style>

                    .post-thumbnail:hover img{

                        transform: none;
                    }
                    .element-link2{
                        top: 0;
                        display: block;
                        position: absolute;
                        height: 100%; 
                        width: 100%; 
                        z-index: 30;
                    }
                    .element-link2:hover{
                        background-color: none;

                    }
                </style>
            </section>
        </ui:define>
    </ui:composition>
</html>

