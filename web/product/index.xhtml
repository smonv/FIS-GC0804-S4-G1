<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <ui:composition template="/templates/client/layout.xhtml">
        <f:metadata>
            <f:viewParam name="mode" value="#{productBean.mode}" />
            <f:viewAction action="#{productBean.checkMode()}"/>
        </f:metadata>
        <ui:define name="title">List Products </ui:define>
        <ui:define name="content">
            <!-- Page title -->
            <div class="page-title">
                
                <c:if test="#{categoryBean.currentCategory== null}">
                <h1>Products</h1>
                </c:if>
                <c:if test="#{categoryBean.currentCategory!= null}">
                    <h1>Products by #{categoryBean.currentCategory.name}</h1>
                </c:if>
                <!-- BREADCRUMBS -->
                <ul class="breadcrumb">
                    <li><h:link outcome="/index.xhtml">Home</h:link><span class="divider"></span></li>
                    <li class="active">Products</li>
                </ul>
            </div>
            <!-- //Page title -->							


            <!-- Project area -->
            <section class="project">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="box-wrapper">
                                <ul id="filter"> 
                                    <h:form>
                                        <li><h:commandLink action="#{categoryBean.setCurrentCategory(null)}" class="btn btn-primary">All</h:commandLink></li>                     
                                    </h:form>  
                                    <ui:repeat var="category" value="#{categoryBean.allCategory}" varStatus="status">
                                        <h:form>
                                            <li><h:commandLink action="#{categoryBean.setCurrentCategory(category)}" class="btn btn-primary">#{category.name}</h:commandLink></li>                           
                                        </h:form>       
                                    </ui:repeat>
                                </ul>

                                <div id="grid">
                                    <c:if test="#{categoryBean.currentCategory==null}">
                                        <ui:repeat var="product" value="#{productBean.allProduct}" varStatus="status">

                                            <div class="item blue col-md-4 col-sm-6 col-xs-12 fix"  data-groups='["all", "numbers", "blue", "square"]'>
                                                <div class="project-item">
                                                    <div class="post-thumbnail element">
                                                        <h:graphicImage name="img/products/demo.jpg" library="client" alt="#{product.name}" />
                                                        <div class="element-overly">Overly</div>
                                                        <a data-rel="prettyPhoto" href="#{resource['client/img/products/demo.jpg']}" class="element-lightbox" ><i class="fa fa-search-plus"></i></a>
                                                        <h:link class="element-link" outcome="/client/product/show.xhtml?pid=#{product.pid}"><i class="fa fa-link"></i></h:link>
                                                    </div>

                                                    <div class="project-details">
                                                        <h2><h:link value="#{product.name}" outcome="/client/product/show.xhtml">
                                                                <f:param name="pid" value="#{product.pid}" />
                                                                <c:if test="#{productBean.mode != null}">
                                                                    <f:param name="mode" value="#{productBean.mode}" />
                                                                </c:if>
                                                            </h:link></h2>
                                                        <p>Price:&nbsp;<h:outputText value="$ #{product.price}" style="font-weight: 400;font-size: 16px; color: red" /></p>
                                                        <div class="readmore">
                                                            <h:link value="Details" outcome="/client/product/show.xhtml?pid=#{product.pid}">
                                                                <f:param name="pid" value="#{product.pid}" />
                                                                <c:if test="#{productBean.mode != null}">
                                                                    <f:param name="mode" value="#{productBean.mode}" />
                                                                </c:if>
                                                            </h:link>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </ui:repeat>
                                    </c:if>
                                    <c:if test="#{categoryBean.currentCategory!= null}">
                                        <ui:repeat var="product" value="#{productBean.getProductsByCtegory(categoryBean.currentCategory.cid)}" varStatus="status">

                                            <div class="item blue col-md-4 col-sm-6 col-xs-12 fix"  data-groups='["all", "numbers", "blue", "square"]'>
                                                <div class="project-item">
                                                    <div class="post-thumbnail element">
                                                        <h:graphicImage name="img/products/demo.jpg" library="client" alt="#{product.name}" />
                                                        <div class="element-overly">Overly</div>
                                                        <a data-rel="prettyPhoto" href="#{resource['client/img/products/demo.jpg']}" class="element-lightbox" ><i class="fa fa-search-plus"></i></a>
                                                        <h:link class="element-link" outcome="/client/product/show.xhtml?pid=#{product.pid}"><i class="fa fa-link"></i></h:link>
                                                    </div>

                                                    <div class="project-details">
                                                        <h2><h:link value="#{product.name}" outcome="/client/product/show.xhtml">
                                                                <f:param name="pid" value="#{product.pid}" />
                                                                <c:if test="#{productBean.mode != null}">
                                                                    <f:param name="mode" value="#{productBean.mode}" />
                                                                </c:if>
                                                            </h:link></h2>
                                                        <p>Price:&nbsp;<h:outputText value="$ #{product.price}" style="font-weight: 400;font-size: 16px; color: red" /></p>
                                                        <div class="readmore">
                                                            <h:link value="Details" outcome="/client/product/show.xhtml?pid=#{product.pid}">
                                                                <f:param name="pid" value="#{product.pid}" />
                                                                <c:if test="#{productBean.mode != null}">
                                                                    <f:param name="mode" value="#{productBean.mode}" />
                                                                </c:if>
                                                            </h:link>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </ui:repeat>
                                    </c:if>

                                </div> <!-- /grid -->	
                            </div> <!-- /box-wrapper -->

                        </div>
                    </div>
                </div>
            </section>
        </ui:define>
    </ui:composition>
</html>

